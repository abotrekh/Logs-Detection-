<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cyber Dashboard</title>
  <style>
    :root {
      --bg: #050b18;
      --panel: #0c152b;
      --card: #0b1428;
      --text: #e8edf7;
      --muted: #9fb2cc;
      --accent: #10b981;
      --accent-2: #34d399;
      --border: #1c2b45;
      --success: #4ade80;
      --warn: #eab308;
      --danger: #fb7185;
      --glow: rgba(16, 185, 129, 0.2);
      --gradient-1: rgba(16,185,129,0.12);
      --gradient-2: rgba(52,211,153,0.12);
      --gradient-3: rgba(34,197,94,0.08);
      --pattern-overlay: rgba(255,255,255,0.04);
      --pill-shadow: rgba(16,185,129,0.38);
      --shadow-dark: rgba(0,0,0,0.32);
      --shadow-card: rgba(0,0,0,0.26);
      --shadow-element: rgba(0,0,0,0.22);
      --shadow-small: rgba(0,0,0,0.18);
      --glow-dot: rgba(16,185,129,0.25);
      --chip-hover: rgba(16,185,129,0.08);
      --chip-active: rgba(16,185,129,0.12);
      --modal-bg: rgba(0,0,0,0.55);
    }
    .light {
      --bg: #f8f9fa;
      --panel: #f1f3f4;
      --card: #ffffff;
      --text: #1a1a1a;
      --muted: #5f6368;
      --accent: #10b981;
      --accent-2: #34d399;
      --border: #e8eaed;
      --success: #34a853;
      --warn: #eab308;
      --danger: #ea4335;
      --glow: rgba(16, 185, 129, 0.1);
      --gradient-1: rgba(16,185,129,0.08);
      --gradient-2: rgba(52,211,153,0.06);
      --gradient-3: rgba(34,197,94,0.05);
      --pattern-overlay: rgba(0,0,0,0.02);
      --pill-shadow: rgba(16,185,129,0.25);
      --shadow-dark: rgba(0,0,0,0.12);
      --shadow-card: rgba(0,0,0,0.08);
      --shadow-element: rgba(0,0,0,0.06);
      --shadow-small: rgba(0,0,0,0.05);
      --glow-dot: rgba(16,185,129,0.15);
      --chip-hover: rgba(16,185,129,0.06);
      --chip-active: rgba(16,185,129,0.08);
      --modal-bg: rgba(0,0,0,0.3);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at 18% 20%, var(--gradient-1), transparent 28%),
                  radial-gradient(circle at 82% 12%, var(--gradient-2), transparent 32%),
                  radial-gradient(circle at 65% 78%, var(--gradient-3), transparent 28%),
                  var(--bg);
      color: var(--text);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background-image: linear-gradient(var(--pattern-overlay) 1px, transparent 1px),
                        linear-gradient(90deg, var(--pattern-overlay) 1px, transparent 1px);
      background-size: 140px 140px;
      opacity: 0.45;
      pointer-events: none;
      mix-blend-mode: soft-light;
    }
    a { color: inherit; text-decoration: none; }
    .app {
      max-width: 1220px;
      margin: 0 auto;
      padding: 26px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      position: relative;
      z-index: 1;
    }
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(135deg, var(--panel), var(--card));
      padding: 18px 20px;
      border-radius: 16px;
      border: 1px solid var(--border);
      box-shadow: 0 18px 48px var(--shadow-dark);
      position: relative;
      overflow: hidden;
    }
    header::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 12% 40%, var(--glow), transparent 38%);
      pointer-events: none;
    }
    header h1 {
      margin: 0;
      font-size: 28px;
      letter-spacing: 0.4px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .subhead {
      color: var(--muted);
      font-size: 13px;
      margin-top: 2px;
    }
    .badge {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--card);
      font-size: 12px;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .glow-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 0 6px var(--glow-dot);
    }
    .toggle {
      background: var(--card);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 9px 15px;
      border-radius: 999px;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 12px 28px var(--shadow-small);
    }
    .toggle:hover { border-color: var(--accent); color: var(--accent); transform: translateY(-1px); }
    .chip {
      border: 1px solid var(--border);
      background: var(--panel);
      color: var(--text);
      padding: 7px 10px;
      border-radius: 999px;
      font-size: 12px;
      cursor: pointer;
      transition: border-color 0.2s ease, transform 0.2s ease, background 0.2s ease;
    }
    .chip:hover { border-color: var(--accent); transform: translateY(-1px); background: var(--chip-hover); }
    .chip.active { border-color: var(--accent); background: var(--chip-active); color: var(--accent); }
    .nav-links {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .link-btn {
      text-decoration: none;
      background: var(--card);
      border: 1px solid var(--border);
      color: var(--accent);
      padding: 9px 12px;
      border-radius: 10px;
      font-weight: 600;
      transition: border-color 0.2s ease, transform 0.2s ease, background 0.2s ease;
    }
    .link-btn:hover { border-color: var(--accent); background: var(--panel); transform: translateY(-1px); }
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 14px;
    }
    .stat-card {
      background: linear-gradient(145deg, var(--panel), var(--card));
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 16px 18px;
      display: flex;
      align-items: center;
      gap: 14px;
      box-shadow: 0 18px 48px var(--shadow-card);
      position: relative;
      overflow: hidden;
    }
    .stat-card::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 80% 20%, var(--glow), transparent 35%);
      pointer-events: none;
    }
    .pill {
      width: 52px; height: 52px;
      border-radius: 14px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      display: grid; place-items: center;
      color: #0f172a; font-weight: 800; font-size: 14px;
      box-shadow: 0 12px 30px var(--pill-shadow);
      animation: pulse 2.6s ease-in-out infinite;
      z-index: 1;
    }
    @keyframes pulse { 0%,100%{transform:scale(1)}50%{transform:scale(1.05)} }
    .white-pill {
      background: white !important;
      color: #1a1a1a !important;
      box-shadow: 0 12px 30px rgba(0,0,0,0.1) !important;
    }
    .stat-body { display: flex; flex-direction: column; gap: 4px; z-index: 1; }
    .stat-body .label { color: var(--muted); font-size: 13px; }
    .stat-body .value { font-size: 24px; font-weight: 800; letter-spacing: 0.4px; }
    .trend {
      height: 6px;
      width: 120px;
      background: linear-gradient(90deg, rgba(34,211,238,0.65), rgba(139,92,246,0.65));
      border-radius: 999px;
      position: relative;
      overflow: hidden;
    }
    .trend::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent);
      transform: translateX(-100%);
      animation: shimmer 2.2s infinite;
    }
    @keyframes shimmer { 0%{transform:translateX(-100%)}100%{transform:translateX(200%)} }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 14px;
    }
    .card {
      background: linear-gradient(160deg, var(--panel), var(--card));
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 16px 18px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      box-shadow: 0 16px 40px var(--shadow-element);
      position: relative;
      overflow: hidden;
    }
    .card::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 14% 20%, var(--glow), transparent 38%);
      pointer-events: none;
    }
    .card h2 {
      margin: 0;
      font-size: 17px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: var(--text);
      z-index: 1;
    }
    .card h3 { margin: 0; color: var(--muted); font-size: 13px; z-index: 1; }
    .tag-wrap {
      display: flex; flex-wrap: wrap; gap: 10px;
      z-index: 1;
    }
    .tag {
      background: var(--card);
      color: var(--text);
      border: 1px solid var(--border);
      padding: 9px 12px;
      border-radius: 10px;
      font-size: 13px;
      transition: border-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
      cursor: pointer;
    }
    .tag:hover { border-color: var(--accent); transform: translateY(-2px); box-shadow: 0 10px 24px var(--shadow-small); }

    .list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
      z-index: 1;
    }
    .item {
      background: var(--card);
      padding: 12px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 13px;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 8px;
      transition: border-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
      cursor: pointer;
    }
    .item::before {
      content: "";
      width: 8px; height: 8px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 0 6px var(--glow-dot);
    }
    .item:hover { border-color: var(--accent); transform: translateY(-2px); box-shadow: 0 10px 24px var(--shadow-small); }

    .table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      z-index: 1;
    }
    .table th, .table td {
      text-align: left;
      padding: 12px 8px;
      border-bottom: 1px solid var(--border);
    }
    .table th { color: var(--muted); font-weight: 600; font-size: 12px; letter-spacing: 0.2px; }
    tbody tr:hover td { border-bottom-color: var(--accent); }
    .grade {
      font-weight: 700;
      padding: 6px 10px;
      border-radius: 999px;
      color: #0f172a;
      display: inline-block;
      min-width: 32px;
      text-align: center;
    }
    .grade.A { background: var(--success); }
    .grade.B { background: var(--warn); }
    .grade.C { background: var(--danger); color: #111827; }
    .action-btn {
      background: transparent;
      color: var(--accent);
      border: 1px solid var(--accent);
      padding: 9px 12px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s ease;
      width: 100%;
      box-shadow: 0 10px 24px var(--glow-dot);
    }
    .action-btn:hover { background: var(--accent); color: #0f172a; }

    .modal {
      position: fixed;
      inset: 0;
      background: var(--modal-bg);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 99;
      backdrop-filter: blur(6px);
    }
    .modal.open { display: flex; }
    .modal-card {
      background: linear-gradient(160deg, var(--panel), var(--card));
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 18px 20px;
      width: min(540px, 100%);
      box-shadow: 0 22px 60px var(--shadow-dark);
      color: var(--text);
      position: relative;
    }
    .modal-close {
      position: absolute;
      top: 12px;
      right: 12px;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
      border-radius: 10px;
      padding: 6px 10px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .modal-close:hover { border-color: var(--accent); color: var(--accent); }
    .profile-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 12px;
      margin: 12px 0 8px;
    }
    .profile-item {
      background: var(--card);
      border: 1px solid var(--border);
      padding: 10px 12px;
      border-radius: 10px;
      font-size: 13px;
    }
    .profile-item .label { color: var(--muted); font-size: 12px; display: block; margin-bottom: 4px; }
    .logs {
      margin-top: 10px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      max-height: 240px;
      overflow: auto;
    }
    .log-row {
      padding: 8px 6px;
      border-bottom: 1px solid var(--border);
      font-size: 13px;
    }
    .log-row:last-child { border-bottom: none; }
    .log-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 8px 0 4px;
    }
    .chip {
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
    }


    @media (max-width: 720px) {
      header { flex-direction: column; align-items: flex-start; gap: 10px; }
      .action-btn { width: auto; }
      .app { padding: 18px; }
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div>
        <h1>Dashboard <span class="badge"><span class="glow-dot"></span>Live</span></h1>
        <div class="subhead">Security Operations Center · Last updated 2m ago</div>
      </div>
      <div class="nav-links">
        <a class="link-btn" href="detected-logs.html">Detected Logs</a>
        <button class="toggle" id="themeToggle">Toggle Theme</button>
      </div>
    </header>

    <section class="stats">
      <div class="stat-card">
        <div class="pill white-pill">Now</div>
        <div class="stat-body">
          <div class="label">Active Metrics</div>
          <div class="value" id="activeMetric">3,258</div>
          <div class="trend"></div>
        </div>
      </div>
      <div class="stat-card">
        <div class="pill white-pill">24h</div>
        <div class="stat-body">
          <div class="label">Alerts Reviewed</div>
          <div class="value" id="alertsReviewed">150</div>
          <div class="trend"></div>
        </div>
      </div>
    </section>

    <section class="grid">
      <div class="card">
        <div>
          <h2>Major Threads</h2>
          <h3>Thread Preview</h3>
        </div>
        <div class="list">
          <div class="item">Thread ID 10243</div>
          <div class="item">Thread ID 30294</div>
          <div class="item">Thread ID 23847</div>
          <div class="item">Thread ID 87423</div>
          <div class="item">Thread ID 98423</div>
          <div class="item">Thread ID 12384</div>
          <div class="item">Thread ID 98231</div>
          <div class="item">Thread ID 77823</div>
        </div>
      </div>

      <div class="card">
        <h2>Modules</h2>
        <div class="tag-wrap">
          <div class="tag">System Admin</div>
          <div class="tag">Ethical Hacking</div>
          <div class="tag">Ethical Hacking</div>
          <div class="tag">OSINT</div>
          <div class="tag">OSINT</div>
          <div class="tag">Social Eng</div>
          <div class="tag">Network Security</div>
          <div class="tag">Network Security</div>
        </div>
      </div>

      <div class="card">
        <h2>Category</h2>
        <div class="tag-wrap">
          <div class="tag">Network Forensics</div>
          <div class="tag">Network Forensics</div>
          <div class="tag">Pen Testing</div>
          <div class="tag">Malware Analysis</div>
          <div class="tag">Incident Response</div>
          <div class="tag">Endpoint Forensics</div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Threat Level</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Grade</th>
            <th>Date Uploaded</th>
            <th style="text-align:right;">Actions</th>
          </tr>
        </thead>
        <tbody id="threatRows">
          <!-- JS will populate -->
        </tbody>
      </table>
    </section>

    <div class="modal" id="profileModal">
      <div class="modal-card">
        <button class="modal-close" id="closeModal">Close</button>
        <h2 style="margin:0 0 6px 0;">Threat Actor Snapshot</h2>
        <div class="subhead">Randomized profile tied to this event</div>
        <div class="profile-grid" id="profileGrid"></div>
        <div class="log-chips" id="logChips"></div>
        <div class="logs" id="logList"></div>
      </div>
    </div>

    <div class="modal" id="threadModal">
      <div class="modal-card">
        <button class="modal-close" id="closeThreadModal">Close</button>
        <h2 style="margin:0 0 6px 0;" id="threadTitle">Thread Details</h2>
        <div class="subhead" id="threadSub">Preview</div>
        <div class="logs" id="threadLogList"></div>
      </div>
    </div>

  </div>

  <script>
    const THEME_KEY = "dashboard-theme";
    (function applySavedTheme() {
      if (localStorage.getItem(THEME_KEY) === "light") {
        document.body.classList.add("light");
      }
    })();

    const data = [
      { grade: "A", time: "2 mins ago" },
      { grade: "B", time: "3 wks ago" },
      { grade: "C", time: "2 days ago" },
      { grade: "A", time: "5 hrs ago" },
      { grade: "B", time: "1 wk ago" },
      { grade: "C", time: "10 mins ago" }
    ];

    const tbody = document.getElementById("threatRows");
    data.forEach(({ grade, time }) => {
      const tr = document.createElement("tr");

      const gradeTd = document.createElement("td");
      const badge = document.createElement("span");
      badge.className = "grade " + grade;
      badge.textContent = grade;
      gradeTd.appendChild(badge);

      const timeTd = document.createElement("td");
      timeTd.textContent = time;

      const actionTd = document.createElement("td");
      actionTd.style.textAlign = "right";
      const btn = document.createElement("button");
      btn.className = "action-btn";
      btn.textContent = "View >";
      btn.addEventListener("click", () => openProfileModal(grade, time));
      actionTd.appendChild(btn);

      tr.appendChild(gradeTd);
      tr.appendChild(timeTd);
      tr.appendChild(actionTd);
      tbody.appendChild(tr);
    });

    const toggle = document.getElementById("themeToggle");
    toggle.addEventListener("click", () => {
      const isLight = document.body.classList.toggle("light");
      localStorage.setItem(THEME_KEY, isLight ? "light" : "dark");
    });

    const activeMetricEl = document.getElementById("activeMetric");
    const alertsReviewedEl = document.getElementById("alertsReviewed");
    let activeMetricVal = 3258;
    let alertsReviewedVal = 150;

    function fmt(n) {
      return n.toLocaleString("en-US");
    }
    function jitter(base, minDelta, maxDelta) {
      const delta = Math.floor(Math.random() * (maxDelta - minDelta + 1)) + minDelta;
      return Math.max(0, base + delta);
    }
    function refreshStats() {
      activeMetricVal = jitter(activeMetricVal, -40, 80);
      alertsReviewedVal = jitter(alertsReviewedVal, -6, 15);
      activeMetricEl.textContent = fmt(activeMetricVal);
      alertsReviewedEl.textContent = fmt(alertsReviewedVal);
    }
    setInterval(refreshStats, 4800);

    const profiles = [
      { name: "khalid alharbi", ip: "185.44.210.12", location: "Riyadh, Ruh" },
      { name: "khadijah baothman", ip: "102.67.14.88", location: "Dammam, Dmm" },
      { name: "faisal alharbi", ip: "77.201.54.129", location: "Jeddah, Jed" },
      { name: "mohhamed dagistani", ip: "189.44.33.210", location: "Jeddah, Jed" },
      { name: "salman alotaibi", ip: "64.12.88.34", location: "Jeddah, Jed" },
      { name: "turki alfaisl", ip: "5.188.10.241", location: "Jeddah, Jed" }
    ];

    const logSamples = [
      "Multiple failed SSH logins detected on bastion host",
      "Privilege escalation attempt via sudoers modification",
      "Outbound data exfil to uncategorized domain",
      "Tor exit node detected as source IP",
      "Unusual PowerShell execution from non-admin account",
      "Lateral movement attempt across subnet 10.0.12.0/24",
      "Suspicious ZIP archive downloaded from spear-phish link",
      "Kernel module loaded without approval",
      "Persistence via startup registry key created",
      "Beaconing pattern to C2 every 90 seconds observed"
    ];

    const modal = document.getElementById("profileModal");
    const closeModalBtn = document.getElementById("closeModal");
    const profileGrid = document.getElementById("profileGrid");
    const logChips = document.getElementById("logChips");
    const logList = document.getElementById("logList");

    closeModalBtn.addEventListener("click", closeProfileModal);
    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeProfileModal();
    });

    function randFrom(arr, count = 1) {
      const copy = [...arr];
      const res = [];
      while (res.length < count && copy.length) {
        const idx = Math.floor(Math.random() * copy.length);
        res.push(copy.splice(idx, 1)[0]);
      }
      return count === 1 ? res[0] : res;
    }

    function openProfileModal(grade, time) {
      const profile = randFrom(profiles);
      const logs = randFrom(logSamples, 4);
      const chipLogs = randFrom(logSamples, 3);

      profileGrid.innerHTML = `
        <div class="profile-item"><span class="label">Grade</span>${grade}</div>
        <div class="profile-item"><span class="label">When</span>${time}</div>
        <div class="profile-item"><span class="label">Name</span>${profile.name}</div>
        <div class="profile-item"><span class="label">IP</span>${profile.ip}</div>
        <div class="profile-item"><span class="label">Location</span>${profile.location}</div>
      `;

      logChips.innerHTML = chipLogs.map(log => `<div class="chip">${log}</div>`).join("");
      logList.innerHTML = logs.map(log => `<div class="log-row">• ${log}</div>`).join("");

      modal.classList.add("open");
    }

    function closeProfileModal() {
      modal.classList.remove("open");
    }

    const threadModal = document.getElementById("threadModal");
    const closeThreadModalBtn = document.getElementById("closeThreadModal");
    const threadTitle = document.getElementById("threadTitle");
    const threadSub = document.getElementById("threadSub");
    const threadLogList = document.getElementById("threadLogList");
    const threadItems = document.querySelectorAll(".card:nth-of-type(1) .item");
    const moduleTags = document.querySelectorAll(".grid .card:nth-of-type(2) .tag");
    const categoryTags = document.querySelectorAll(".grid .card:nth-of-type(3) .tag");
    const threatRows = document.querySelectorAll("#threatRows tr");

    const threadLogs = [
      "Recon detected: masscan sweep across TCP/443, 8443",
      "JWT replay attempt using expired token from unfamiliar IP",
      "Fileless malware pattern observed in PowerShell session",
      "Credential stuffing bursts against customer portal",
      "DNS tunneling signatures matched (TXT payload anomalies)",
      "Unexpected sudo invocation by non-privileged user",
      "Outbound connection to known C2 sinkholed domain blocked",
      "Multipart payload upload with dual extensions .png.exe",
      "Process injection attempt into svchost.exe thwarted",
      "Webhook spam burst correlated with phishing lure"
    ];

    const moduleDescriptions = {
      "System Admin": "System administration hygiene signals and endpoint baselines.",
      "Ethical Hacking": "Pentest-derived indicators and controlled exploit attempts.",
      "OSINT": "Open-source intel hits mapped to current infra.",
      "Social Eng": "Phishing and pretexting detections across comms.",
      "Network Security": "Perimeter and east-west traffic anomalies."
    };

    const categoryDescriptions = {
      "Network Forensics": "Packet captures, flow records, and session anomaly traces.",
      "Pen Testing": "Offensive security findings and exploit replay telemetry.",
      "Malware Analysis": "Dynamic/sandbox traces and signature extracts.",
      "Incident Response": "IR case artifacts and containment actions.",
      "Endpoint Forensics": "Disk/memory artifacts and persistence hunts."
    };

    threadItems.forEach(item => {
      item.addEventListener("click", () => openThreadModal(item.textContent.trim()));
    });

    moduleTags.forEach(tag => {
      tag.addEventListener("click", () => {
        const key = tag.textContent.trim();
        openInfoModal(key, moduleDescriptions[key] || "Module insights and latest events.");
      });
    });

    categoryTags.forEach(tag => {
      tag.addEventListener("click", () => {
        const key = tag.textContent.trim();
        openInfoModal(key, categoryDescriptions[key] || "Category findings and recent signals.");
      });
    });

    closeThreadModalBtn.addEventListener("click", closeThreadModal);
    threadModal.addEventListener("click", (e) => {
      if (e.target === threadModal) closeThreadModal();
    });

    function openThreadModal(threadId) {
      threadTitle.textContent = threadId;
      threadSub.textContent = "Live signals & latest indicators";
      const logs = randFrom(threadLogs, 5);
      threadLogList.innerHTML = logs.map(log => `<div class="log-row">• ${log}</div>`).join("");
      threadModal.classList.add("open");
    }

    function openInfoModal(title, description) {
      threadTitle.textContent = title;
      threadSub.textContent = description;
      const logs = randFrom(threadLogs, 5);
      threadLogList.innerHTML = logs.map(log => `<div class="log-row">• ${log}</div>`).join("");
      threadModal.classList.add("open");
    }

    function closeThreadModal() {
      threadModal.classList.remove("open");
    }

  </script>
</body>
</html>